import{a as _,k as z,n as M,o as k,c as b,h as y,D as N,_ as $,i as B,w as E}from"./index-CH_O8Qgo.js";const I={class:"content"},P=_({name:"WaterMark",__name:"waterMark",props:{text:{},fontSize:{},gradientColors:{},rotate:{},xGap:{},yGap:{}},setup(p){const a=p,c=z(null),l=(t,e)=>{var h;const i=document.createElement("canvas"),r=i.getContext("2d");if(!r)return"";const g=200,u=200;i.width=g,i.height=u;const C=e.fontSize||"24px",v=e.rotate||-10,f=e.xGap||200,m=e.yGap||200;let d;if(((h=e.gradientColors)==null?void 0:h.length)!==1){const n=e.gradientColors||["rgba(0, 0, 0, 0.1)","rgba(0, 0, 0, 0.5)"];d=r.createLinearGradient(0,0,g,u),n.forEach((s,S)=>{d.addColorStop(S/(n.length-1),s)})}else d=e.gradientColors[0];r.font=`${C} Arial`,r.fillStyle=d,r.textAlign="center",r.textBaseline="middle",r.rotate(v*Math.PI/180);const w=g/2,G=u/2;r.fillText(t,w,G);const o=document.createElement("canvas"),x=o.getContext("2d");if(!x)return"";o.width=f*2,o.height=m*2;for(let n=0;n<o.width;n+=f)for(let s=0;s<o.height;s+=m)x.drawImage(i,n,s);return o.toDataURL("image/png")};return M(()=>{if(c.value){const t=c.value,e=l(a.text,{fontSize:a.fontSize,gradientColors:a.gradientColors,rotate:Number(a.rotate),xGap:Number(a.xGap),yGap:Number(a.yGap)});t.style.position="relative",t.style.width="100%",t.style.height="100%",t.style.backgroundImage=`url(${e})`,t.style.backgroundSize="auto",t.style.backgroundRepeat="repeat",t.style.backgroundPosition="0 0"}}),(t,e)=>(k(),b("div",{ref_key:"watermarkedContainer",ref:c,class:"watermarked-container"},[y("div",I,[N(t.$slots,"default",{},void 0,!0)])],512))}}),W=$(P,[["__scopeId","data-v-b352937b"]]),A={class:"main-container box-padding box-bg-color"},L=_({__name:"index",setup(p){const a=["purple","magenta","blue","red"];return(c,l)=>(k(),b("div",A,[B(W,{text:"测试一下",fontSize:"16px",gradientColors:a,rotate:"10",xGap:"200",yGap:"200"},{default:E(()=>l[0]||(l[0]=[y("div",null,"插槽内容",-1)])),_:1})]))}});export{L as default};
