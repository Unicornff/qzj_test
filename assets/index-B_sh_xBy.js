import{a as h,j as z,n as I,c as b,g as k,I as M,o as y,_ as N,e as $,w as B}from"./index-BBVKY95c.js";const E={class:"content"},P=h({name:"WaterMark",__name:"waterMark",props:{text:{},fontSize:{},gradientColors:{},rotate:{},xGap:{},yGap:{}},setup(p){const a=p,l=z(null),c=(e,t)=>{var _;const i=document.createElement("canvas"),r=i.getContext("2d");if(!r)return"";const g=200,u=200;i.width=g,i.height=u;const C=t.fontSize||"24px",v=t.rotate||-10,f=t.xGap||200,x=t.yGap||200;let d;if(((_=t.gradientColors)==null?void 0:_.length)!==1){const n=t.gradientColors||["rgba(0, 0, 0, 0.1)","rgba(0, 0, 0, 0.5)"];d=r.createLinearGradient(0,0,g,u),n.forEach((s,S)=>{d.addColorStop(S/(n.length-1),s)})}else d=t.gradientColors[0];r.font=`${C} Arial`,r.fillStyle=d,r.textAlign="center",r.textBaseline="middle",r.rotate(v*Math.PI/180);const w=g/2,G=u/2;r.fillText(e,w,G);const o=document.createElement("canvas"),m=o.getContext("2d");if(!m)return"";o.width=f*2,o.height=x*2;for(let n=0;n<o.width;n+=f)for(let s=0;s<o.height;s+=x)m.drawImage(i,n,s);return o.toDataURL("image/png")};return I(()=>{if(l.value){const e=l.value,t=c(a.text,{fontSize:a.fontSize,gradientColors:a.gradientColors,rotate:Number(a.rotate),xGap:Number(a.xGap),yGap:Number(a.yGap)});e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.backgroundImage=`url(${t})`,e.style.backgroundSize="auto",e.style.backgroundRepeat="repeat",e.style.backgroundPosition="0 0"}}),(e,t)=>(y(),b("div",{ref_key:"watermarkedContainer",ref:l,class:"watermarked-container"},[k("div",E,[M(e.$slots,"default",{},void 0,!0)])],512))}}),W=N(P,[["__scopeId","data-v-b352937b"]]),A={class:"full-size box-padding box-bg-color"},R=h({__name:"index",setup(p){const a=["purple","magenta","blue","red"];return(l,c)=>(y(),b("div",A,[$(W,{text:"测试一下",fontSize:"16px",gradientColors:a,rotate:"10",xGap:"200",yGap:"200"},{default:B(()=>c[0]||(c[0]=[k("div",null,"插槽内容",-1)])),_:1})]))}});export{R as default};
